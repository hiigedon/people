

## 微博评论采集（单线程）

数据源为m端的接口。本身不难，找到接口就完事了。

例如：`https://m.weibo.cn/detail/4422508285181410`

f12接口信息：`https://m.weibo.cn/comments/hotflow?id={id}&mid={mid}&max_id=`


其中mid的值为变化的

将这个链接重放到浏览器中显示的竟然是空数据。然后向下翻页，对比数据改变的数据为max_id的内容。结果是：链接不能重放，标识的内容为max_id决定。

max_id是从哪里来的呢？仔细看返回数据的内容存在max_id的字段。证实：本次的max_id为上次想用的数据中。也就是只能重放一次失效。

在实际运用过程，加入出现了第5页的数据，再去请求一次第二页的数据是没必要的，也是不合理的。第二页的数据都已经加载在网站中了。重新刷新页面会出现第一次请求。也会得到下一页（第二页）数据的max_id。猜想第一页的数据可以无限次的使用，但是每次返回的max_id不会重复。

博客[bjj.dropsec.xyz](https://bjj.dropsec.xyz/2020/02/25/%E5%BE%AE%E5%8D%9A%E8%AF%84%E8%AE%BA%E8%BD%AC%E5%8F%91%E9%87%87%E9%9B%86/)

## 微博转发采集（单线程）

更简单，数据源也为m端的接口。

https://m.weibo.cn/api/statuses/repostTimeline 传入两个值：id，page。


## 结果

cookie基本不失效，采集评论速度可放慢些。或者自己添加代理等。